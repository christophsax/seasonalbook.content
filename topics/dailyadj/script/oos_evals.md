oos\_evals.R
================
christoph
2021-01-02

# 12 Month OOS

``` r
opts_chunk$set(cache=TRUE)

library(forecast)
pkgload::load_all(".")
```

    ## Loading dailyadj

``` r
x <- casualties
# x <- transact
```

## seas\_dummy

``` r
z <- oos_evals(x, seas_dummy)
```

    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols

``` r
summary_oos_evals(z)
```

    ## # A tibble: 13 x 4
    ##    period      mrse   mae   mpce
    ##    <chr>      <dbl> <dbl>  <dbl>
    ##  1 2016-01-31  69.1  58.6 0.122
    ##  2 2016-02-29  94.8  78.8 0.180
    ##  3 2016-03-31 105.   89.6 0.208
    ##  4 2016-04-30  87.1  76.9 0.173
    ##  5 2016-05-31  86.1  69.4 0.149
    ##  6 2016-06-30  70.3  61.2 0.128
    ##  7 2016-07-31  70.3  60.2 0.120
    ##  8 2016-08-31  71.5  60.7 0.128
    ##  9 2016-09-30  55.9  45.1 0.0923
    ## 10 2016-10-31  94.1  80.9 0.172
    ## 11 2016-11-30  52.2  41.5 0.0823
    ## 12 2016-12-31 151.  120.  0.324
    ## 13 Mean        84.0  70.2 0.156

``` r
plot_oos_evals(z)
```

    ## Warning: Removed 1 row(s) containing missing values (geom_path).

![](oos_evals_files/figure-gfm/unnamed-chunk-2-1.png)<!-- -->

## seas\_loess

``` r
z <-  oos_evals(x, seas_daily)
summary_oos_evals(z)
```

    ## # A tibble: 13 x 4
    ##    period      mrse   mae   mpce
    ##    <chr>      <dbl> <dbl>  <dbl>
    ##  1 2016-01-31  82.2  66.3 0.127
    ##  2 2016-02-29  57.1  45.9 0.103
    ##  3 2016-03-31  67.3  55.0 0.121
    ##  4 2016-04-30  71.3  57.4 0.125
    ##  5 2016-05-31  60.1  48.0 0.100
    ##  6 2016-06-30  56.0  46.6 0.0969
    ##  7 2016-07-31  58.9  46.4 0.0888
    ##  8 2016-08-31  57.6  45.6 0.0888
    ##  9 2016-09-30  51.2  42.6 0.0879
    ## 10 2016-10-31  62.1  51.8 0.108
    ## 11 2016-11-30  73.5  60.4 0.111
    ## 12 2016-12-31  82.7  62.4 0.164
    ## 13 Mean        65.0  52.4 0.110

``` r
plot_oos_evals(z)
```

![](oos_evals_files/figure-gfm/unnamed-chunk-3-1.png)<!-- -->

## seas\_dsa

``` r
z <-  oos_evals(x, seas_dsa)
```

    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%
    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%
    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%
    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%
    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%
    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%
    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%
    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%
    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%
    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%

    ## Warning in grep(stats::start(x_ts), a):grep(stats::end(x_ts), a): numerical
    ## expression has 2 elements: only the first used

    ##   |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%
    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%
    ##   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |====================                                                  |  29%  |                                                                              |===========================                                           |  38%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |=====================================================                 |  76%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%

``` r
summary_oos_evals(z)
```

    ## # A tibble: 13 x 4
    ##    period      mrse   mae   mpce
    ##    <chr>      <dbl> <dbl>  <dbl>
    ##  1 2016-01-31  74.3  60.3 0.119
    ##  2 2016-02-29  56.8  42.7 0.0896
    ##  3 2016-03-31  58.9  48.1 0.109
    ##  4 2016-04-30  53.2  40.9 0.0882
    ##  5 2016-05-31  61.8  49.2 0.104
    ##  6 2016-06-30  51.7  44.4 0.0927
    ##  7 2016-07-31  58.8  49.6 0.0971
    ##  8 2016-08-31  52.0  41.0 0.0810
    ##  9 2016-09-30  43.0  32.8 0.0666
    ## 10 2016-10-31  57.1  47.1 0.0986
    ## 11 2016-11-30  58.5  49.9 0.0931
    ## 12 2016-12-31  72.1  59.4 0.133
    ## 13 Mean        58.2  47.1 0.0976

``` r
plot_oos_evals(z)
```

![](oos_evals_files/figure-gfm/unnamed-chunk-4-1.png)<!-- -->

## seas\_prophet

``` r
z <- oos_evals(x, seas_prophet)
summary_oos_evals(z)
```

    ## # A tibble: 13 x 4
    ##    period      mrse   mae   mpce
    ##    <chr>      <dbl> <dbl>  <dbl>
    ##  1 2016-01-31  88.4  74.0 0.146
    ##  2 2016-02-29  62.6  45.9 0.0962
    ##  3 2016-03-31  56.2  45.0 0.0977
    ##  4 2016-04-30  55.9  42.6 0.0928
    ##  5 2016-05-31  64.2  48.5 0.104
    ##  6 2016-06-30  58.2  50.6 0.106
    ##  7 2016-07-31  62.9  54.4 0.108
    ##  8 2016-08-31  47.4  36.5 0.0745
    ##  9 2016-09-30  52.9  43.4 0.0881
    ## 10 2016-10-31  69.6  57.6 0.121
    ## 11 2016-11-30  50.0  39.7 0.0782
    ## 12 2016-12-31  72.6  57.0 0.146
    ## 13 Mean        61.7  49.6 0.105

``` r
plot_oos_evals(z)
```

![](oos_evals_files/figure-gfm/unnamed-chunk-5-1.png)<!-- -->

## seas\_stlf

``` r
z <- oos_evals(x, seas_stlf)
```

    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols
    ## adding extra cols

``` r
summary_oos_evals(z)
```

    ## # A tibble: 13 x 4
    ##    period      mrse   mae   mpce
    ##    <chr>      <dbl> <dbl>  <dbl>
    ##  1 2016-01-31  88.2  71.6 0.148
    ##  2 2016-02-29  86.2  68.8 0.153
    ##  3 2016-03-31  73.6  61.2 0.141
    ##  4 2016-04-30  75.6  58.6 0.130
    ##  5 2016-05-31  60.3  49.2 0.105
    ##  6 2016-06-30  63.2  53.5 0.113
    ##  7 2016-07-31  59.6  44.7 0.0869
    ##  8 2016-08-31  65.7  46.5 0.0904
    ##  9 2016-09-30  63.2  49.1 0.103
    ## 10 2016-10-31  64.8  45.9 0.102
    ## 11 2016-11-30  92.5  72.3 0.136
    ## 12 2016-12-31 106.   85.6 0.193
    ## 13 Mean        74.9  58.9 0.125

``` r
plot_oos_evals(z)
```

![](oos_evals_files/figure-gfm/unnamed-chunk-6-1.png)<!-- -->

## seas\_harmon

``` r
z <- oos_evals(x, seas_harmon)
```

    ## .adding extra cols
    ## .adding extra cols
    ## .adding extra cols
    ## .adding extra cols
    ## .adding extra cols
    ## .adding extra cols
    ## .adding extra cols
    ## .adding extra cols
    ## .adding extra cols
    ## .adding extra cols
    ## .adding extra cols
    ## .adding extra cols

``` r
summary_oos_evals(z)
```

    ## # A tibble: 13 x 4
    ##    period      mrse   mae   mpce
    ##    <chr>      <dbl> <dbl>  <dbl>
    ##  1 2016-01-31 101.   82.6 0.167
    ##  2 2016-02-29  82.2  67.0 0.149
    ##  3 2016-03-31  71.5  58.6 0.135
    ##  4 2016-04-30  65.2  49.9 0.111
    ##  5 2016-05-31  59.5  48.2 0.105
    ##  6 2016-06-30  58.8  50.3 0.106
    ##  7 2016-07-31  53.3  41.5 0.0802
    ##  8 2016-08-31  65.3  46.7 0.0905
    ##  9 2016-09-30  60.6  48.1 0.101
    ## 10 2016-10-31  65.2  47.5 0.106
    ## 11 2016-11-30  89.4  68.4 0.132
    ## 12 2016-12-31 104.   90.4 0.200
    ## 13 Mean        73.0  58.3 0.123

``` r
plot_oos_evals(z)
```

![](oos_evals_files/figure-gfm/unnamed-chunk-7-1.png)<!-- -->

## seas\_naive

``` r
z <- oos_evals(x, seas_naive)
summary_oos_evals(z)
```

    ## # A tibble: 13 x 4
    ##    period      mrse   mae  mpce
    ##    <chr>      <dbl> <dbl> <dbl>
    ##  1 2016-01-31  97.1  78.4 0.169
    ##  2 2016-02-29  80.9  64.2 0.144
    ##  3 2016-03-31  76.9  63.0 0.146
    ##  4 2016-04-30  67.9  53.1 0.118
    ##  5 2016-05-31  60.0  47.1 0.104
    ##  6 2016-06-30  65.1  55.4 0.119
    ##  7 2016-07-31  69.7  63.0 0.128
    ##  8 2016-08-31  66.1  51.7 0.106
    ##  9 2016-09-30  69.6  54.1 0.116
    ## 10 2016-10-31  82.0  64.9 0.145
    ## 11 2016-11-30  91.4  68.6 0.141
    ## 12 2016-12-31 121.   95.1 0.247
    ## 13 Mean        79.0  63.2 0.140

``` r
plot_oos_evals(z)
```

    ## Warning: Removed 1 row(s) containing missing values (geom_path).

![](oos_evals_files/figure-gfm/unnamed-chunk-8-1.png)<!-- -->
