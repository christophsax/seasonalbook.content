<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.336">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="James Livsey and Christoph Sax">
<title>Seasonal Adjustment in R - 9&nbsp; Trading days</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./33-outliers.html" rel="next">
<link href="./31-holidays.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><meta name="robots" content="noindex">
<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><script src="site_libs/jquery-1.11.1/jquery.min.js"></script><link href="site_libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="site_libs/dygraphs-1.1.1/dygraph-combined.js"></script><script src="site_libs/dygraphs-1.1.1/shapes.js"></script><script src="site_libs/moment-2.8.4/moment.js"></script><script src="site_libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="site_libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="site_libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./30-part-data-problems.html">Data Problems</a></li><li class="breadcrumb-item"><a href="./32-trading-days.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Trading days</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Seasonal Adjustment in R</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/christophsax/seasonalbook.content" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-getting-started.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting started</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./20-part-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">The fundamentals of X-13</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Transform</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-regARIMA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">regARIMA Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-x11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">X-11</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-seats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">SEATS</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./30-part-data-problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Problems</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./31-holidays.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Irregular holidays</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./32-trading-days.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Trading days</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./33-outliers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Outliers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./34-seasonal-breaks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Seasonal breaks</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./40-part-other-issues.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Other Issues</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./41-presence-of-seasonality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Presence of seasonality</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./42-annual-constraining.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Annual constraining</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./43-indirect-vs-direct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Indirect vs direct adjustment</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./50-part-quality-assessment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quality assessment</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./51-quality-measures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Quality measures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./52-revisions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Revisions</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#built-in-trading-day-adjustment" id="toc-built-in-trading-day-adjustment" class="nav-link active" data-scroll-target="#built-in-trading-day-adjustment"><span class="header-section-number">9.1</span> Built-in trading day adjustment</a></li>
  <li><a href="#case-study-hobby-toy-game" id="toc-case-study-hobby-toy-game" class="nav-link" data-scroll-target="#case-study-hobby-toy-game"><span class="header-section-number">9.2</span> Case Study: Hobby Toy Game</a></li>
  <li>
<a href="#sec-replicate-x-13-trading-days-adjustment" id="toc-sec-replicate-x-13-trading-days-adjustment" class="nav-link" data-scroll-target="#sec-replicate-x-13-trading-days-adjustment"><span class="header-section-number">9.3</span> Case Study: Replicate X-13 trading days adjustment</a>
  <ul class="collapse">
<li><a href="#constructing-weekday-regressors" id="toc-constructing-weekday-regressors" class="nav-link" data-scroll-target="#constructing-weekday-regressors"><span class="header-section-number">9.3.1</span> Constructing weekday regressors</a></li>
  <li><a href="#single-coefficient-regressor" id="toc-single-coefficient-regressor" class="nav-link" data-scroll-target="#single-coefficient-regressor"><span class="header-section-number">9.3.2</span> Single coefficient regressor</a></li>
  <li><a href="#one-coefficient-per-day" id="toc-one-coefficient-per-day" class="nav-link" data-scroll-target="#one-coefficient-per-day"><span class="header-section-number">9.3.3</span> One coefficient per day</a></li>
  <li><a href="#is-it-worth-building-country-specific-regressors" id="toc-is-it-worth-building-country-specific-regressors" class="nav-link" data-scroll-target="#is-it-worth-building-country-specific-regressors"><span class="header-section-number">9.3.4</span> Is it worth building country specific regressors?</a></li>
  </ul>
</li>
  <li><a href="#case-study-azerbaijani-consumer-price-index-for-construction" id="toc-case-study-azerbaijani-consumer-price-index-for-construction" class="nav-link" data-scroll-target="#case-study-azerbaijani-consumer-price-index-for-construction"><span class="header-section-number">9.4</span> Case Study: Azerbaijani Consumer price index for construction</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">9.5</span> Exercises</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/christophsax/seasonalbook.content/edit/main/32-trading-days.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/christophsax/seasonalbook.content/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-trading-days" class="quarto-section-identifier"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Trading days</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><!--
-   Why should we adjust for trading day effects

-   Seven or two coefficient trading day

-   Using country specific calendars

-   Case Study: Movie tickets (or another series with very clear trading day effects)

 --><!-- Why should we adjust for trading day effects --><p>Similarly to irregular holidays, the weekly pattern differs from year to year. So the number of weekdays in a given month or quarter may be different from year to year. In the example below, January 2022 has 21 weekdays, while January 2023 has 22 weekdays. Some time series, such as manufacturing, may be affected by this pattern.</p>
<div id="fig-mini-cal" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-mini-cal-22" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/mini-cal-22.png" class="img-fluid figure-img" data-ref-parent="fig-mini-cal"></p>
<figcaption class="figure-caption">(a) January 2022</figcaption></figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-mini-cal-23" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/mini-cal-23.png" class="img-fluid figure-img" data-ref-parent="fig-mini-cal"></p>
<figcaption class="figure-caption">(b) January 2023</figcaption></figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;9.1: The number of weekdays per month differ between years</figcaption><p></p>
</figure>
</div>
<p>Similar to the holiday adjustments, X-13 offers various tools to deal with differences in the number of days or weekdays. This chapter discusses the automated trading day adjustments in X-13, and explores various ways of user customization. Note that the term <em>trading day</em> adjustment is X-13 slang for weekday adjustment and will be used interchangeably.</p>
<p>Trading day effects constitute a predictable movement in a time series, and therefore should not be part of the seasonally adjusted series. Trading day effects are usually removed by the regression spec, although some adjustments can also be done by the transform spec. Contrary to the regression spec, the transform spec performs a 1:1 adjustment, while the regression spec estimates the size of the effect from the data.</p>
<!-- TODO: resolve @sec-user-defined-regressors, which sec should point to? -->
<p>As with most adjustments, X-13 offers a built-in automated adjustment that works well in most circumstances. We start the chapter by looking at the automated procedures. Sometimes, you want to rely on a user-defined specification of trading days, a topic covered in <span class="quarto-unresolved-ref">?sec-user-defined-regressors</span>. Finally, in <a href="#sec-replicate-x-13-trading-days-adjustment"><span>Section&nbsp;9.3</span></a>, we link the two sections by replicating the built-in regressors in R.</p>
<section id="built-in-trading-day-adjustment" class="level2" data-number="9.1"><h2 data-number="9.1" class="anchored" data-anchor-id="built-in-trading-day-adjustment">
<span class="header-section-number">9.1</span> Built-in trading day adjustment</h2>
<p>In a default run of <code><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas()</a></code>, X-13 uses a familiar AICc test to decide between a number of potential trading day adjustments. From the various models, it uses the one with the lowest AICc as the best model. By default, the following models are evaluated:</p>
<ul>
<li><p><code>td1coef</code>: A single coefficient trading day adjustment</p></li>
<li><p><code>td</code>: A six-day coefficient trading day adjustment</p></li>
</ul>
<p>The first model distinguishes between weekdays and weekends, while the second model treats every day as its own. The first model is appropriate for many economic time series, where variables behave differently during the week than during the weekend. In some series, there may be large differences between weekdays, or even between Saturday and Sunday. Retail sales, for example, usually peak towards the end of the week and are weak on Sunday.</p>
<p>Using the built-in trading day adjustment in X-13 is straightforward:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">seas</span><span class="op">(</span><span class="va">AirPassengers</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; seas(x = AirPassengers)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                     Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Weekday           -0.0029497  0.0005232  -5.638 1.72e-08 ***</span></span>
<span><span class="co">#&gt; Easter[1]          0.0177674  0.0071580   2.482   0.0131 *  </span></span>
<span><span class="co">#&gt; AO1951.May         0.1001558  0.0204387   4.900 9.57e-07 ***</span></span>
<span><span class="co">#&gt; MA-Nonseasonal-01  0.1156204  0.0858588   1.347   0.1781    </span></span>
<span><span class="co">#&gt; MA-Seasonal-12     0.4973600  0.0774677   6.420 1.36e-10 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SEATS adj.  ARIMA: (0 1 1)(0 1 1)  Obs.: 144  Transform: log</span></span>
<span><span class="co">#&gt; AICc: 947.3, BIC: 963.9  QS (no seasonality in final):    0  </span></span>
<span><span class="co">#&gt; Box-Ljung (no autocorr.): 26.65   Shapiro (normality): 0.9908</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The procedure has opted for a one coefficient model. During weekdays, the number of air passengers was lower during the period of the example series, by about 0.3% (note we are looking at a logarithmic, multiplicative model).</p>
<p>We can manipulate the automated model. To enforce a six coefficient model, <code>regression.variables</code> can be specified as <code>"td"</code> (as opposed to <code>"td1coef"</code>):</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">m_td</span> <span class="op">&lt;-</span> <span class="fu">seas</span><span class="op">(</span><span class="va">AirPassengers</span>, regression.variables <span class="op">=</span> <span class="st">"td"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m_td</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; seas(x = AirPassengers, regression.variables = "td")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                 Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Mon            -0.001527   0.003458  -0.442   0.6588    </span></span>
<span><span class="co">#&gt; Tue            -0.007677   0.003607  -2.129   0.0333 *  </span></span>
<span><span class="co">#&gt; Wed            -0.001125   0.003465  -0.325   0.7453    </span></span>
<span><span class="co">#&gt; Thu            -0.005350   0.003425  -1.562   0.1183    </span></span>
<span><span class="co">#&gt; Fri             0.004676   0.003447   1.357   0.1749    </span></span>
<span><span class="co">#&gt; Sat             0.003025   0.003568   0.848   0.3965    </span></span>
<span><span class="co">#&gt; Easter[1]       0.017999   0.007246   2.484   0.0130 *  </span></span>
<span><span class="co">#&gt; AO1951.May      0.109256   0.019651   5.560 2.70e-08 ***</span></span>
<span><span class="co">#&gt; MA-Seasonal-12  0.500775   0.077252   6.482 9.03e-11 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SEATS adj.  ARIMA: (0 1 0)(0 1 1)  Obs.: 144  Transform: log</span></span>
<span><span class="co">#&gt; AICc: 949.5, BIC: 976.4  QS (no seasonality in final):    0  </span></span>
<span><span class="co">#&gt; Box-Ljung (no autocorr.): 28.05   Shapiro (normality): 0.9902</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that the resulting AICc is higher (949.5) than for the one coefficient model (947.3). That is why the automated procedure has opted for the simpler model.</p>
</section><section id="case-study-hobby-toy-game" class="level2" data-number="9.2"><h2 data-number="9.2" class="anchored" data-anchor-id="case-study-hobby-toy-game">
<span class="header-section-number">9.2</span> Case Study: Hobby Toy Game</h2>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">seas</span><span class="op">(</span><span class="va">hobby_toy_game</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; seas(x = hobby_toy_game)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                    Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Mon               -0.009625   0.003358  -2.866 0.004157 ** </span></span>
<span><span class="co">#&gt; Tue                0.014245   0.003276   4.349 1.37e-05 ***</span></span>
<span><span class="co">#&gt; Wed               -0.009167   0.003289  -2.787 0.005326 ** </span></span>
<span><span class="co">#&gt; Thu               -0.001631   0.003258  -0.501 0.616624    </span></span>
<span><span class="co">#&gt; Fri                0.010977   0.003332   3.295 0.000984 ***</span></span>
<span><span class="co">#&gt; Sat                0.011069   0.003316   3.338 0.000843 ***</span></span>
<span><span class="co">#&gt; Easter[8]          0.061462   0.006426   9.564  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; AO1996.May        -0.217402   0.025347  -8.577  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; AO1996.Dec         0.145309   0.025339   5.735 9.77e-09 ***</span></span>
<span><span class="co">#&gt; MA-Nonseasonal-01  0.377066   0.056405   6.685 2.31e-11 ***</span></span>
<span><span class="co">#&gt; MA-Nonseasonal-02  0.360585   0.056510   6.381 1.76e-10 ***</span></span>
<span><span class="co">#&gt; MA-Seasonal-12     0.326875   0.055259   5.915 3.31e-09 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SEATS adj.  ARIMA: (0 1 2)(0 1 1)  Obs.: 282  Transform: log</span></span>
<span><span class="co">#&gt; AICc:  2826, BIC:  2871  QS (no seasonality in final):    0  </span></span>
<span><span class="co">#&gt; Box-Ljung (no autocorr.): 27.25   Shapiro (normality): 0.9887 *</span></span>
<span></span>
<span><span class="fu">static</span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span>
<span><span class="co">#&gt; seas(</span></span>
<span><span class="co">#&gt;   x = hobby_toy_game,</span></span>
<span><span class="co">#&gt;   regression.variables = c("td", "easter[8]", "ao1996.May", "ao1996.Dec"),</span></span>
<span><span class="co">#&gt;   arima.model = "(0 1 2)(0 1 1)",</span></span>
<span><span class="co">#&gt;   regression.aictest = NULL,</span></span>
<span><span class="co">#&gt;   outlier = NULL,</span></span>
<span><span class="co">#&gt;   transform.function = "log"</span></span>
<span><span class="co">#&gt; )</span></span>
<span></span>
<span><span class="va">m0</span> <span class="op">&lt;-</span> <span class="fu">seas</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">hobby_toy_game</span>,</span>
<span>  regression.variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"td"</span>, <span class="st">"easter[8]"</span>, <span class="st">"ao1996.May"</span>, <span class="st">"ao1996.Dec"</span><span class="op">)</span>,</span>
<span>  arima.model <span class="op">=</span> <span class="st">"(0 1 2)(0 1 1)"</span>,</span>
<span>  regression.aictest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outlier <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  transform.function <span class="op">=</span> <span class="st">"log"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m0</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; seas(x = hobby_toy_game, transform.function = "log", regression.aictest = NULL, </span></span>
<span><span class="co">#&gt;     outlier = NULL, regression.variables = c("td", "easter[8]", </span></span>
<span><span class="co">#&gt;         "ao1996.May", "ao1996.Dec"), arima.model = "(0 1 2)(0 1 1)")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                    Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Mon               -0.009625   0.003358  -2.866 0.004157 ** </span></span>
<span><span class="co">#&gt; Tue                0.014245   0.003276   4.349 1.37e-05 ***</span></span>
<span><span class="co">#&gt; Wed               -0.009167   0.003290  -2.787 0.005327 ** </span></span>
<span><span class="co">#&gt; Thu               -0.001631   0.003258  -0.501 0.616637    </span></span>
<span><span class="co">#&gt; Fri                0.010977   0.003332   3.295 0.000985 ***</span></span>
<span><span class="co">#&gt; Sat                0.011069   0.003316   3.338 0.000843 ***</span></span>
<span><span class="co">#&gt; Easter[8]          0.061462   0.006426   9.564  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; AO1996.May        -0.217403   0.025348  -8.577  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; AO1996.Dec         0.145309   0.025339   5.735 9.78e-09 ***</span></span>
<span><span class="co">#&gt; MA-Nonseasonal-01  0.377086   0.056405   6.685 2.30e-11 ***</span></span>
<span><span class="co">#&gt; MA-Nonseasonal-02  0.360597   0.056509   6.381 1.76e-10 ***</span></span>
<span><span class="co">#&gt; MA-Seasonal-12     0.326884   0.055258   5.916 3.31e-09 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SEATS adj.  ARIMA: (0 1 2)(0 1 1)  Obs.: 282  Transform: log</span></span>
<span><span class="co">#&gt; AICc:  2826, BIC:  2871  QS (no seasonality in final):    0  </span></span>
<span><span class="co">#&gt; Box-Ljung (no autocorr.): 27.25   Shapiro (normality): 0.9887 *</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu">seas</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">hobby_toy_game</span>,</span>
<span>  regression.variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"td1coef"</span>, <span class="st">"easter[8]"</span>, <span class="st">"ao1996.May"</span>, <span class="st">"ao1996.Dec"</span><span class="op">)</span>,</span>
<span>  arima.model <span class="op">=</span> <span class="st">"(0 1 2)(0 1 1)"</span>,</span>
<span>  regression.aictest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outlier <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  transform.function <span class="op">=</span> <span class="st">"log"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; seas(x = hobby_toy_game, transform.function = "log", regression.aictest = NULL, </span></span>
<span><span class="co">#&gt;     outlier = NULL, regression.variables = c("td1coef", "easter[8]", </span></span>
<span><span class="co">#&gt;         "ao1996.May", "ao1996.Dec"), arima.model = "(0 1 2)(0 1 1)")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                     Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Weekday            0.0005289  0.0005944   0.890    0.374    </span></span>
<span><span class="co">#&gt; Easter[8]          0.0542854  0.0074088   7.327 2.35e-13 ***</span></span>
<span><span class="co">#&gt; AO1996.May        -0.2300586  0.0290640  -7.916 2.46e-15 ***</span></span>
<span><span class="co">#&gt; AO1996.Dec         0.1231689  0.0289604   4.253 2.11e-05 ***</span></span>
<span><span class="co">#&gt; MA-Nonseasonal-01  0.4421089  0.0569371   7.765 8.17e-15 ***</span></span>
<span><span class="co">#&gt; MA-Nonseasonal-02  0.3495768  0.0569694   6.136 8.45e-10 ***</span></span>
<span><span class="co">#&gt; MA-Seasonal-12     0.3571851  0.0551869   6.472 9.65e-11 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SEATS adj.  ARIMA: (0 1 2)(0 1 1)  Obs.: 282  Transform: log</span></span>
<span><span class="co">#&gt; AICc:  2875, BIC:  2904  QS (no seasonality in final):    0  </span></span>
<span><span class="co">#&gt; Box-Ljung (no autocorr.): 40.88 * Shapiro (normality): 0.9943</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/tsbox/">tsbox</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_examples.html">ts_dygraphs</a></span><span class="op">(</span><span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_c.html">ts_c</a></span><span class="op">(</span></span>
<span>  <span class="fu">final</span><span class="op">(</span><span class="va">m0</span><span class="op">)</span>,</span>
<span>  <span class="fu">final</span><span class="op">(</span><span class="va">m1</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="dygraphs html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:433px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"attrs":{"labels":["month","final(m0)","final(m1)"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"scale":"monthly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["1992-01-01T00:00:00.000Z","1992-02-01T00:00:00.000Z","1992-03-01T00:00:00.000Z","1992-04-01T00:00:00.000Z","1992-05-01T00:00:00.000Z","1992-06-01T00:00:00.000Z","1992-07-01T00:00:00.000Z","1992-08-01T00:00:00.000Z","1992-09-01T00:00:00.000Z","1992-10-01T00:00:00.000Z","1992-11-01T00:00:00.000Z","1992-12-01T00:00:00.000Z","1993-01-01T00:00:00.000Z","1993-02-01T00:00:00.000Z","1993-03-01T00:00:00.000Z","1993-04-01T00:00:00.000Z","1993-05-01T00:00:00.000Z","1993-06-01T00:00:00.000Z","1993-07-01T00:00:00.000Z","1993-08-01T00:00:00.000Z","1993-09-01T00:00:00.000Z","1993-10-01T00:00:00.000Z","1993-11-01T00:00:00.000Z","1993-12-01T00:00:00.000Z","1994-01-01T00:00:00.000Z","1994-02-01T00:00:00.000Z","1994-03-01T00:00:00.000Z","1994-04-01T00:00:00.000Z","1994-05-01T00:00:00.000Z","1994-06-01T00:00:00.000Z","1994-07-01T00:00:00.000Z","1994-08-01T00:00:00.000Z","1994-09-01T00:00:00.000Z","1994-10-01T00:00:00.000Z","1994-11-01T00:00:00.000Z","1994-12-01T00:00:00.000Z","1995-01-01T00:00:00.000Z","1995-02-01T00:00:00.000Z","1995-03-01T00:00:00.000Z","1995-04-01T00:00:00.000Z","1995-05-01T00:00:00.000Z","1995-06-01T00:00:00.000Z","1995-07-01T00:00:00.000Z","1995-08-01T00:00:00.000Z","1995-09-01T00:00:00.000Z","1995-10-01T00:00:00.000Z","1995-11-01T00:00:00.000Z","1995-12-01T00:00:00.000Z","1996-01-01T00:00:00.000Z","1996-02-01T00:00:00.000Z","1996-03-01T00:00:00.000Z","1996-04-01T00:00:00.000Z","1996-05-01T00:00:00.000Z","1996-06-01T00:00:00.000Z","1996-07-01T00:00:00.000Z","1996-08-01T00:00:00.000Z","1996-09-01T00:00:00.000Z","1996-10-01T00:00:00.000Z","1996-11-01T00:00:00.000Z","1996-12-01T00:00:00.000Z","1997-01-01T00:00:00.000Z","1997-02-01T00:00:00.000Z","1997-03-01T00:00:00.000Z","1997-04-01T00:00:00.000Z","1997-05-01T00:00:00.000Z","1997-06-01T00:00:00.000Z","1997-07-01T00:00:00.000Z","1997-08-01T00:00:00.000Z","1997-09-01T00:00:00.000Z","1997-10-01T00:00:00.000Z","1997-11-01T00:00:00.000Z","1997-12-01T00:00:00.000Z","1998-01-01T00:00:00.000Z","1998-02-01T00:00:00.000Z","1998-03-01T00:00:00.000Z","1998-04-01T00:00:00.000Z","1998-05-01T00:00:00.000Z","1998-06-01T00:00:00.000Z","1998-07-01T00:00:00.000Z","1998-08-01T00:00:00.000Z","1998-09-01T00:00:00.000Z","1998-10-01T00:00:00.000Z","1998-11-01T00:00:00.000Z","1998-12-01T00:00:00.000Z","1999-01-01T00:00:00.000Z","1999-02-01T00:00:00.000Z","1999-03-01T00:00:00.000Z","1999-04-01T00:00:00.000Z","1999-05-01T00:00:00.000Z","1999-06-01T00:00:00.000Z","1999-07-01T00:00:00.000Z","1999-08-01T00:00:00.000Z","1999-09-01T00:00:00.000Z","1999-10-01T00:00:00.000Z","1999-11-01T00:00:00.000Z","1999-12-01T00:00:00.000Z","2000-01-01T00:00:00.000Z","2000-02-01T00:00:00.000Z","2000-03-01T00:00:00.000Z","2000-04-01T00:00:00.000Z","2000-05-01T00:00:00.000Z","2000-06-01T00:00:00.000Z","2000-07-01T00:00:00.000Z","2000-08-01T00:00:00.000Z","2000-09-01T00:00:00.000Z","2000-10-01T00:00:00.000Z","2000-11-01T00:00:00.000Z","2000-12-01T00:00:00.000Z","2001-01-01T00:00:00.000Z","2001-02-01T00:00:00.000Z","2001-03-01T00:00:00.000Z","2001-04-01T00:00:00.000Z","2001-05-01T00:00:00.000Z","2001-06-01T00:00:00.000Z","2001-07-01T00:00:00.000Z","2001-08-01T00:00:00.000Z","2001-09-01T00:00:00.000Z","2001-10-01T00:00:00.000Z","2001-11-01T00:00:00.000Z","2001-12-01T00:00:00.000Z","2002-01-01T00:00:00.000Z","2002-02-01T00:00:00.000Z","2002-03-01T00:00:00.000Z","2002-04-01T00:00:00.000Z","2002-05-01T00:00:00.000Z","2002-06-01T00:00:00.000Z","2002-07-01T00:00:00.000Z","2002-08-01T00:00:00.000Z","2002-09-01T00:00:00.000Z","2002-10-01T00:00:00.000Z","2002-11-01T00:00:00.000Z","2002-12-01T00:00:00.000Z","2003-01-01T00:00:00.000Z","2003-02-01T00:00:00.000Z","2003-03-01T00:00:00.000Z","2003-04-01T00:00:00.000Z","2003-05-01T00:00:00.000Z","2003-06-01T00:00:00.000Z","2003-07-01T00:00:00.000Z","2003-08-01T00:00:00.000Z","2003-09-01T00:00:00.000Z","2003-10-01T00:00:00.000Z","2003-11-01T00:00:00.000Z","2003-12-01T00:00:00.000Z","2004-01-01T00:00:00.000Z","2004-02-01T00:00:00.000Z","2004-03-01T00:00:00.000Z","2004-04-01T00:00:00.000Z","2004-05-01T00:00:00.000Z","2004-06-01T00:00:00.000Z","2004-07-01T00:00:00.000Z","2004-08-01T00:00:00.000Z","2004-09-01T00:00:00.000Z","2004-10-01T00:00:00.000Z","2004-11-01T00:00:00.000Z","2004-12-01T00:00:00.000Z","2005-01-01T00:00:00.000Z","2005-02-01T00:00:00.000Z","2005-03-01T00:00:00.000Z","2005-04-01T00:00:00.000Z","2005-05-01T00:00:00.000Z","2005-06-01T00:00:00.000Z","2005-07-01T00:00:00.000Z","2005-08-01T00:00:00.000Z","2005-09-01T00:00:00.000Z","2005-10-01T00:00:00.000Z","2005-11-01T00:00:00.000Z","2005-12-01T00:00:00.000Z","2006-01-01T00:00:00.000Z","2006-02-01T00:00:00.000Z","2006-03-01T00:00:00.000Z","2006-04-01T00:00:00.000Z","2006-05-01T00:00:00.000Z","2006-06-01T00:00:00.000Z","2006-07-01T00:00:00.000Z","2006-08-01T00:00:00.000Z","2006-09-01T00:00:00.000Z","2006-10-01T00:00:00.000Z","2006-11-01T00:00:00.000Z","2006-12-01T00:00:00.000Z","2007-01-01T00:00:00.000Z","2007-02-01T00:00:00.000Z","2007-03-01T00:00:00.000Z","2007-04-01T00:00:00.000Z","2007-05-01T00:00:00.000Z","2007-06-01T00:00:00.000Z","2007-07-01T00:00:00.000Z","2007-08-01T00:00:00.000Z","2007-09-01T00:00:00.000Z","2007-10-01T00:00:00.000Z","2007-11-01T00:00:00.000Z","2007-12-01T00:00:00.000Z","2008-01-01T00:00:00.000Z","2008-02-01T00:00:00.000Z","2008-03-01T00:00:00.000Z","2008-04-01T00:00:00.000Z","2008-05-01T00:00:00.000Z","2008-06-01T00:00:00.000Z","2008-07-01T00:00:00.000Z","2008-08-01T00:00:00.000Z","2008-09-01T00:00:00.000Z","2008-10-01T00:00:00.000Z","2008-11-01T00:00:00.000Z","2008-12-01T00:00:00.000Z","2009-01-01T00:00:00.000Z","2009-02-01T00:00:00.000Z","2009-03-01T00:00:00.000Z","2009-04-01T00:00:00.000Z","2009-05-01T00:00:00.000Z","2009-06-01T00:00:00.000Z","2009-07-01T00:00:00.000Z","2009-08-01T00:00:00.000Z","2009-09-01T00:00:00.000Z","2009-10-01T00:00:00.000Z","2009-11-01T00:00:00.000Z","2009-12-01T00:00:00.000Z","2010-01-01T00:00:00.000Z","2010-02-01T00:00:00.000Z","2010-03-01T00:00:00.000Z","2010-04-01T00:00:00.000Z","2010-05-01T00:00:00.000Z","2010-06-01T00:00:00.000Z","2010-07-01T00:00:00.000Z","2010-08-01T00:00:00.000Z","2010-09-01T00:00:00.000Z","2010-10-01T00:00:00.000Z","2010-11-01T00:00:00.000Z","2010-12-01T00:00:00.000Z","2011-01-01T00:00:00.000Z","2011-02-01T00:00:00.000Z","2011-03-01T00:00:00.000Z","2011-04-01T00:00:00.000Z","2011-05-01T00:00:00.000Z","2011-06-01T00:00:00.000Z","2011-07-01T00:00:00.000Z","2011-08-01T00:00:00.000Z","2011-09-01T00:00:00.000Z","2011-10-01T00:00:00.000Z","2011-11-01T00:00:00.000Z","2011-12-01T00:00:00.000Z","2012-01-01T00:00:00.000Z","2012-02-01T00:00:00.000Z","2012-03-01T00:00:00.000Z","2012-04-01T00:00:00.000Z","2012-05-01T00:00:00.000Z","2012-06-01T00:00:00.000Z","2012-07-01T00:00:00.000Z","2012-08-01T00:00:00.000Z","2012-09-01T00:00:00.000Z","2012-10-01T00:00:00.000Z","2012-11-01T00:00:00.000Z","2012-12-01T00:00:00.000Z","2013-01-01T00:00:00.000Z","2013-02-01T00:00:00.000Z","2013-03-01T00:00:00.000Z","2013-04-01T00:00:00.000Z","2013-05-01T00:00:00.000Z","2013-06-01T00:00:00.000Z","2013-07-01T00:00:00.000Z","2013-08-01T00:00:00.000Z","2013-09-01T00:00:00.000Z","2013-10-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2013-12-01T00:00:00.000Z","2014-01-01T00:00:00.000Z","2014-02-01T00:00:00.000Z","2014-03-01T00:00:00.000Z","2014-04-01T00:00:00.000Z","2014-05-01T00:00:00.000Z","2014-06-01T00:00:00.000Z","2014-07-01T00:00:00.000Z","2014-08-01T00:00:00.000Z","2014-09-01T00:00:00.000Z","2014-10-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2014-12-01T00:00:00.000Z","2015-01-01T00:00:00.000Z","2015-02-01T00:00:00.000Z","2015-03-01T00:00:00.000Z","2015-04-01T00:00:00.000Z","2015-05-01T00:00:00.000Z","2015-06-01T00:00:00.000Z"],[894.602182725345,870.025581039809,862.680446864134,880.817156012914,870.379086805566,895.291492504345,872.781920656179,881.640736077567,873.082113122172,885.595722699954,878.546809312827,909.4743890717471,882.137801232384,895.085241164932,895.985122567819,899.747808852295,917.733416139892,908.267753540018,935.184601769898,909.219139438625,921.654209987361,900.351033484198,938.975737397054,959.535216673588,952.336760161726,986.316223877206,999.530545598215,992.314911242529,993.500873658639,987.1955389767541,996.756652040106,1046.76325524302,1052.5026382515,1089.89194842437,1041.03427097338,1033.97695463854,1065.01100753081,1041.07416961353,1058.89660794138,1087.57848323628,1090.45223509092,1108.07763269755,1103.70158035091,1098.09870649196,1087.97112996449,1089.71834035164,1126.37616747072,1127.99631609279,1103.81811673329,1100.18443776894,1107.87417712064,1101.81515190531,890.620006080194,1102.88798583172,1130.27107503594,1120.39635581318,1159.0375721741,1176.34081818709,1190.67118464691,1353.15499516226,1144.90139662426,1188.10840078077,1232.20857477466,1196.54819234701,1224.0767270092,1235.91060366954,1226.60608348173,1232.87085812055,1250.56371073715,1249.46351999797,1259.82489078925,1255.25359872499,1284.31544786702,1291.03173382062,1258.44459140468,1295.81545230287,1285.76582038695,1296.0891624718,1324.25570259729,1325.05706812039,1292.58169294152,1303.10599085843,1322.93016985139,1348.15814721807,1397.22963024813,1389.60237525136,1376.69543815951,1379.6607877979,1398.59578725802,1399.32794088372,1352.74704922099,1404.83432777336,1414.86400806354,1392.43299144493,1348.76189013367,1368.81932851673,1389.21730815042,1382.15913190484,1382.34175641191,1422.7310362225,1408.18996051378,1395.91705260564,1432.58724954296,1424.04047296214,1443.73277392786,1403.67912659251,1372.006666604,1399.63603102459,1372.38551943465,1401.18732699718,1422.47766921395,1379.51156416084,1366.09638167758,1395.19649100312,1390.02048009682,1373.7008948619,1358.54917895356,1393.08153410088,1450.31551238671,1387.07111341269,1378.8838761077,1392.33159883636,1377.60693652248,1363.783886815,1415.73081448077,1383.79035564608,1401.49555457672,1385.56189228374,1389.81203515359,1419.60892210274,1439.88173511365,1407.65060425704,1380.23393463956,1351.73085013584,1395.23470427354,1421.66646305908,1405.82493807447,1416.98952208943,1386.86608337985,1407.78061377708,1403.11480927402,1372.39496763478,1373.18505637892,1383.94566870436,1375.59593081314,1422.6518082017,1385.62726282046,1342.99365493083,1320.24537341754,1338.13339197239,1359.00348689257,1351.29792875555,1376.5577886699,1391.69850154042,1371.96885457612,1367.01209256099,1356.33493842633,1354.4705008757,1352.04714448545,1404.9617036075,1399.7362458877,1383.77433490383,1361.44626008289,1362.99517541487,1326.74699412305,1360.48412411294,1373.81949903115,1372.09494786457,1456.54730112674,1392.58724250358,1364.16251686985,1357.21977232969,1360.8526654765,1351.71669009029,1367.13649341727,1355.44667099785,1368.56185067096,1343.08672877121,1304.04308127714,1359.44288191394,1310.13825066581,1337.53007099935,1394.31628130963,1357.77751285604,1356.31704036423,1390.17198352136,1396.93341143475,1402.70901135397,1413.04088045337,1409.35566756158,1455.22592784179,1394.90395125543,1417.09589347864,1397.05681321188,1372.9218814232,1399.81670714595,1409.42446582878,1389.62644333563,1375.61315394374,1371.72121171695,1346.26391025861,1355.85458244049,1341.1399969148,1352.8862458266,1370.47141405423,1349.57681918562,1334.38088056973,1336.04167391979,1339.32167846659,1322.105624763,1335.37383716467,1318.06955682951,1329.85125879558,1302.37567552215,1308.10844573512,1317.67940839301,1301.24502514575,1325.95930997757,1324.7825699285,1321.08123182076,1325.8860030038,1329.95272292309,1334.08380315272,1352.90273567599,1349.84958316571,1374.36626319582,1380.93104693692,1376.23506833068,1349.01210802751,1344.75430116711,1393.52288117212,1392.01041112696,1361.87233740808,1397.94323854879,1375.28964335344,1381.70956629328,1399.26031508057,1395.80436822901,1390.05740048838,1370.16352738815,1460.8258424878,1477.92778136239,1438.95765524382,1423.67490862012,1461.32445108049,1430.2416087883,1431.29474545791,1425.29818688722,1410.58269215493,1401.78505522419,1374.00766138011,1378.29845653288,1400.49209478706,1395.42904839864,1378.66085499355,1415.3466547651,1403.64042846391,1404.79535713615,1412.70630328261,1427.0405714065,1440.60171637248,1459.4418176044,1470.37252823107,1469.77501971889,1413.03165263576,1433.16067625697,1460.99134094059,1445.64627071822,1454.83710611096,1479.34245088426,1498.3071670675,1500.0018216537,1511.1813276381,1505.04806335615,1523.24993165207,1552.95314821842,1567.71302794089,1566.41178431701,1575.48464555746,1587.39571915952,1596.55341618465,1589.12422741494],[893.344904485167,872.1174577002849,857.097825130262,872.3512299406379,876.051676656895,896.942428532518,867.178146449962,879.570334876759,874.807672535111,891.904176792685,868.570821016317,912.826144826086,888.837449900102,891.598220287678,893.318266854866,904.074505302402,911.372473904865,911.635255642655,946.251092389276,907.014374323045,911.6235517445079,901.391607471168,945.979910406699,955.6230223896951,945.846427454275,985.670856024867,1006.49107260539,1002.76825877145,988.864135482845,977.247911632332,1000.45672833796,1045.0016298446,1059.19494919545,1082.44823054241,1046.73233903929,1044.33327849017,1060.02356154735,1039.85425178887,1055.53168961936,1083.71297179689,1085.66422553481,1119.09506512074,1094.29814214946,1097.96936502811,1107.29572652543,1084.27007582691,1117.9794212443,1129.75705067597,1101.33306539296,1097.94408031335,1117.66929807126,1103.39921175244,883.638104819294,1105.92204077098,1126.95911061987,1135.82375207955,1137.34678552347,1183.0272950053,1215.48972613136,1331.04859983236,1140.59462304294,1189.65390206682,1231.92859872228,1195.97148847582,1238.7858745687,1217.15529288393,1230.91162073996,1237.46849280219,1257.89732826907,1243.92455154726,1261.55879904153,1245.30371903001,1302.87050982537,1291.24108243544,1251.08000214926,1287.80381245963,1290.31851461263,1302.71385173776,1320.73702492749,1315.54158708769,1295.75494397104,1317.41020260773,1299.27328472916,1349.98836133523,1405.38537364963,1388.84424355162,1376.05020241171,1390.53963343507,1387.03674634233,1400.7925652901,1373.23920315612,1398.15693815657,1402.17228262791,1396.79298490384,1354.62209869819,1364.91841155559,1375.95452410603,1394.47920108683,1374.83155223438,1430.21229158364,1403.71708897638,1398.20394465775,1421.4490337151,1429.16489419579,1472.33620450436,1392.0578834612,1358.36450169959,1410.47668713879,1366.25794705993,1397.55578973406,1440.59735196003,1358.90918264576,1368.22939552609,1414.74551630335,1383.82164656623,1367.51084116246,1357.39257960214,1389.96238507494,1460.64625166284,1377.91910326045,1380.09748429281,1391.24344998347,1388.19411600911,1363.68532579789,1411.65719358333,1382.63284064263,1396.35900636298,1403.08133030239,1366.51056911905,1426.07953321816,1463.02804765893,1402.82405018819,1373.24493539254,1353.19442962573,1379.65744502884,1424.89709992959,1429.0151067685,1393.58698151434,1386.51965182141,1412.17718807147,1414.80073933379,1370.89215659455,1366.23948315105,1380.57192372139,1397.88254483815,1411.71345944789,1380.26876402111,1346.54916713585,1305.87508899338,1347.44750911815,1374.46567976747,1339.54590540937,1364.15654256822,1405.55639446159,1373.10003550439,1364.18252416917,1345.52009841972,1358.48485118562,1358.46050214363,1420.80663894753,1394.07716293256,1371.6337077406,1367.30903825844,1357.03857787602,1329.1371055916,1351.11039996871,1376.94927896776,1390.41654854547,1453.44041968893,1395.60570872868,1355.76025644222,1358.80450306755,1355.80069800582,1358.89341085962,1356.03864396165,1359.36278786052,1386.65175829576,1336.99028980434,1290.49734951656,1365.1982477199,1306.01975523581,1333.45401337244,1416.77689448623,1336.89483161135,1354.25744791659,1415.17684474301,1388.54925449825,1402.9485223234,1404.3089189037,1406.5502608571,1470.01540852266,1381.7490957931,1416.72961948513,1405.60697156396,1364.38595490516,1405.32678806289,1428.97420922765,1361.82111104253,1380.59196739914,1382.47998890428,1346.85842293442,1350.93445506144,1344.32259835167,1347.93913776297,1389.21055912427,1347.16558634726,1324.70205387818,1327.86871782769,1345.50710494785,1328.27229892139,1329.9286236807,1310.42459177797,1333.44053549684,1319.05533022641,1286.18160996137,1321.22330801572,1305.30968497918,1326.43635524398,1323.64627665843,1325.52968812427,1314.47404118289,1334.86751474546,1349.61459363351,1347.77158167866,1338.44245479932,1380.94126019737,1388.20885027202,1371.72692751335,1336.86106589994,1347.78631795442,1390.22904956912,1420.47322696485,1352.81649622376,1383.43027855015,1380.24257608262,1376.82530115256,1412.62204804279,1382.88578852887,1388.20433283006,1388.63540490361,1454.05395223782,1472.80468319675,1456.98979189424,1397.82973902256,1466.66236750214,1456.50275397012,1418.83647735557,1421.62301453328,1414.61088868865,1397.83674516327,1372.98429290929,1364.26044473992,1404.32091813873,1397.7117944784,1388.98516888465,1418.44474521037,1396.80304994971,1405.04644111973,1407.10029051756,1444.87364328457,1420.35526422243,1466.62765244438,1489.2947487091,1466.31779021661,1403.87332482208,1434.11225074648,1446.7776644534,1456.66294554327,1469.21116103674,1455.13953549155,1502.63799866753,1498.26650576337,1525.21489120755,1505.04111222772,1513.34006895668,1557.36550256,1583.24668258853,1567.26463420632,1574.14349935487,1578.59382802097,1594.33213110177,1600.13617322812]]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="sec-replicate-x-13-trading-days-adjustment" class="level2" data-number="9.3"><h2 data-number="9.3" class="anchored" data-anchor-id="sec-replicate-x-13-trading-days-adjustment">
<span class="header-section-number">9.3</span> Case Study: Replicate X-13 trading days adjustment</h2>
<p>‘Trading day adjustment’ removes the effect of the weekdays, but does not include holidays, such as Christmas or Easter. These are handled separately (Easter) (<a href="31-holidays.html"><span>Chapter&nbsp;8</span></a>) or dealt with standard seasonal adjustment (Christmas).</p>
<p>Sometimes, users may want to specify user-defined trading day regressors, to incorporate country specific trading day patterns. In <a href="#sec-replicate-x-13-trading-days-adjustment"><span>Section&nbsp;9.3</span></a>, we replicate the built-in regressors. These regressors simply use the number of weekdays, and do not pay any reference to a country specific calendar. If you want to deviate from them, a good way is to start with the replicated values, and adjust from there.</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/tsbox/">tsbox</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.seasonal.website">seasonal</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="constructing-weekday-regressors" class="level3" data-number="9.3.1"><h3 data-number="9.3.1" class="anchored" data-anchor-id="constructing-weekday-regressors">
<span class="header-section-number">9.3.1</span> Constructing weekday regressors</h3>
<p>To construct weekday regressors in R, we use the following code:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"1931-01-01"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2030-12-31"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">first_of_month</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span></span>
<span>    <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/IDateTime.html">year</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span>,</span>
<span>    <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/IDateTime.html">month</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span>,</span>
<span>    <span class="fl">1</span>,</span>
<span>    sep <span class="op">=</span> <span class="st">"-"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">td_m_tbl</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="va">dates</span>, wd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXlt</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span><span class="op">$</span><span class="va">wday</span>, name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">weekdays</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fu">first_of_month</span><span class="op">(</span><span class="va">dates</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    mon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>    tue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>    wed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>    thu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">4</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>    fri <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">5</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>    sat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">6</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>    td1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">-</span> <span class="fl">5</span> <span class="op">/</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">wd</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">td_m_tbl</span></span>
<span><span class="co">#&gt; [90m# A tibble: 1,200 × 8[39m</span></span>
<span><span class="co">#&gt;   [1mtime[22m         [1mmon[22m   [1mtue[22m   [1mwed[22m   [1mthu[22m   [1mfri[22m   [1msat[22m   [1mtd1[22m</span></span>
<span><span class="co">#&gt;   [3m[90m&lt;date&gt;[39m[23m     [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m</span></span>
<span><span class="co">#&gt; [90m1[39m 1931-01-01     0     0     0     1     1     1  -[31m0[39m[31m.[39m[31m5[39m</span></span>
<span><span class="co">#&gt; [90m2[39m 1931-02-01     0     0     0     0     0     0   0  </span></span>
<span><span class="co">#&gt; [90m3[39m 1931-03-01     0     0    -[31m1[39m    -[31m1[39m    -[31m1[39m    -[31m1[39m  -[31m0[39m[31m.[39m[31m5[39m</span></span>
<span><span class="co">#&gt; [90m4[39m 1931-04-01     0     0     1     1     0     0   2  </span></span>
<span><span class="co">#&gt; [90m5[39m 1931-05-01    -[31m1[39m    -[31m1[39m    -[31m1[39m    -[31m1[39m     0     0  -[31m4[39m  </span></span>
<span><span class="co">#&gt; [90m6[39m 1931-06-01     1     1     0     0     0     0   2  </span></span>
<span><span class="co">#&gt; [90m# ℹ 1,194 more rows[39m</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For each month, <code>td_m_tbl</code> computes the number of specific weekdays, and compares them to the number of Sundays (<code>wd == -</code>) (columns <code>mon</code> to <code>sat</code>). For example, in May 1931, the number of Mondays was 4 while the number of Sundays was 5. The column <code>td1</code> compares the total number of weekdays with the total number of weekends. The normalization formula is the one used by X-13 and described in the X-13 manual.</p>
<!--
td1nolpyear

:   Include the weekday-weekend contrast variable (monthly and quarterly flow series only): (no. of weekdays) −(5/2) (no. of Saturdays and Sundays).

tdnolpyear

:   Include the six day-of-week contrast variables (monthly and quarterly flow series only): (no. of Mondays) − (no. of Sundays), .
    . . , (no. of Saturdays) − (no. of Sundays).

 -->
<p>To extract the regressors as <code>ts</code> time series, we use the following code:</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">td1nolpyear</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">td_m_tbl</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">time</span>, value <span class="op">=</span> <span class="va">td1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_ts.html">ts_ts</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tdnolpyear</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">td_m_tbl</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">td1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_long.html">ts_long</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_ts.html">ts_ts</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="single-coefficient-regressor" class="level3" data-number="9.3.2"><h3 data-number="9.3.2" class="anchored" data-anchor-id="single-coefficient-regressor">
<span class="header-section-number">9.3.2</span> Single coefficient regressor</h3>
<p>It is straightforward to replicate these values to the automated procedure in X-13:</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">m_td1coef</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op">(</span></span>
<span>  <span class="va">AirPassengers</span>,</span>
<span>  xreg <span class="op">=</span> <span class="va">td1nolpyear</span>,</span>
<span>  regression.aictest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outlier <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  regression.usertype <span class="op">=</span> <span class="st">"td"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m_td1coef</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; seas(x = AirPassengers, xreg = td1nolpyear, regression.aictest = NULL, </span></span>
<span><span class="co">#&gt;     outlier = NULL, regression.usertype = "td")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                     Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; xreg              -0.0025474  0.0006732  -3.784 0.000154 ***</span></span>
<span><span class="co">#&gt; MA-Nonseasonal-01  0.3292278  0.0813633   4.046 5.20e-05 ***</span></span>
<span><span class="co">#&gt; MA-Seasonal-12     0.5695911  0.0739360   7.704 1.32e-14 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SEATS adj.  ARIMA: (0 1 1)(0 1 1)  Obs.: 144  Transform: log</span></span>
<span><span class="co">#&gt; AICc: 976.6, BIC: 987.7  QS (no seasonality in final):    0  </span></span>
<span><span class="co">#&gt; Box-Ljung (no autocorr.): 24.86   Shapiro (normality): 0.9805 *</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">m_td1coef_built_in</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op">(</span></span>
<span>  <span class="va">AirPassengers</span>,</span>
<span>  regression.aictest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outlier <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  regression.variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"td1nolpyear"</span>, outlier <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m_td1coef_built_in</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; seas(x = AirPassengers, regression.aictest = NULL, outlier = NULL, </span></span>
<span><span class="co">#&gt;     regression.variables = c("td1nolpyear", outlier = NULL))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                     Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Weekday           -0.0025474  0.0006732  -3.784 0.000154 ***</span></span>
<span><span class="co">#&gt; MA-Nonseasonal-01  0.3292278  0.0813633   4.046 5.20e-05 ***</span></span>
<span><span class="co">#&gt; MA-Seasonal-12     0.5695911  0.0739360   7.704 1.32e-14 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SEATS adj.  ARIMA: (0 1 1)(0 1 1)  Obs.: 144  Transform: log</span></span>
<span><span class="co">#&gt; AICc: 976.6, BIC: 987.7  QS (no seasonality in final):    0  </span></span>
<span><span class="co">#&gt; Box-Ljung (no autocorr.): 24.86   Shapiro (normality): 0.9805 *</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="one-coefficient-per-day" class="level3" data-number="9.3.3"><h3 data-number="9.3.3" class="anchored" data-anchor-id="one-coefficient-per-day">
<span class="header-section-number">9.3.3</span> One coefficient per day</h3>
<p>Note that the baseline is Sunday.</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">m_td</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op">(</span></span>
<span>  <span class="va">AirPassengers</span>,</span>
<span>  xreg <span class="op">=</span> <span class="va">tdnolpyear</span>,</span>
<span>  regression.aictest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outlier <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  regression.usertype <span class="op">=</span> <span class="st">"td"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m_td</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; seas(x = AirPassengers, xreg = tdnolpyear, regression.aictest = NULL, </span></span>
<span><span class="co">#&gt;     outlier = NULL, regression.usertype = "td")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                    Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; xreg1             -0.004982   0.004731  -1.053 0.292359    </span></span>
<span><span class="co">#&gt; xreg2             -0.004589   0.004762  -0.964 0.335172    </span></span>
<span><span class="co">#&gt; xreg3             -0.001612   0.004745  -0.340 0.734094    </span></span>
<span><span class="co">#&gt; xreg4             -0.003817   0.004680  -0.816 0.414652    </span></span>
<span><span class="co">#&gt; xreg5              0.003958   0.004706   0.841 0.400272    </span></span>
<span><span class="co">#&gt; xreg6              0.003164   0.004829   0.655 0.512342    </span></span>
<span><span class="co">#&gt; MA-Nonseasonal-01  0.298942   0.082193   3.637 0.000276 ***</span></span>
<span><span class="co">#&gt; MA-Seasonal-12     0.579965   0.073855   7.853 4.07e-15 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SEATS adj.  ARIMA: (0 1 1)(0 1 1)  Obs.: 144  Transform: log</span></span>
<span><span class="co">#&gt; AICc: 983.9, BIC:  1008  QS (no seasonality in final):    0  </span></span>
<span><span class="co">#&gt; Box-Ljung (no autocorr.): 29.43   Shapiro (normality): 0.9781 *</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">m_td_built_in</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op">(</span></span>
<span>  <span class="va">AirPassengers</span>,</span>
<span>  regression.aictest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outlier <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  regression.variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"tdnolpyear"</span>, outlier <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m_td_built_in</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; seas(x = AirPassengers, regression.aictest = NULL, outlier = NULL, </span></span>
<span><span class="co">#&gt;     regression.variables = c("tdnolpyear", outlier = NULL))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                    Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Mon               -0.004982   0.004731  -1.053 0.292359    </span></span>
<span><span class="co">#&gt; Tue               -0.004589   0.004762  -0.964 0.335172    </span></span>
<span><span class="co">#&gt; Wed               -0.001612   0.004745  -0.340 0.734094    </span></span>
<span><span class="co">#&gt; Thu               -0.003817   0.004680  -0.816 0.414652    </span></span>
<span><span class="co">#&gt; Fri                0.003958   0.004706   0.841 0.400272    </span></span>
<span><span class="co">#&gt; Sat                0.003164   0.004829   0.655 0.512342    </span></span>
<span><span class="co">#&gt; MA-Nonseasonal-01  0.298942   0.082193   3.637 0.000276 ***</span></span>
<span><span class="co">#&gt; MA-Seasonal-12     0.579965   0.073855   7.853 4.07e-15 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SEATS adj.  ARIMA: (0 1 1)(0 1 1)  Obs.: 144  Transform: log</span></span>
<span><span class="co">#&gt; AICc: 983.9, BIC:  1008  QS (no seasonality in final):    0  </span></span>
<span><span class="co">#&gt; Box-Ljung (no autocorr.): 29.43   Shapiro (normality): 0.9781 *</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="is-it-worth-building-country-specific-regressors" class="level3" data-number="9.3.4"><h3 data-number="9.3.4" class="anchored" data-anchor-id="is-it-worth-building-country-specific-regressors">
<span class="header-section-number">9.3.4</span> Is it worth building country specific regressors?</h3>
<p>The built-in trading day adjustment in X-13 is exclusively based on the calendar to construct regressor variables, meaning it does not consider country-specific holidays like Thanksgiving in the US. These holidays are addressed separately, as discussed in the <a href="31-holidays.html"><span>Chapter&nbsp;8</span></a> section.</p>
<p>As previously noted, regular holidays, such as Christmas, typically don’t need special handling. When dealing with irregular holidays, such as Chinese New Year, employing holiday regressors is the preferred approach. Consequently, creating country-specific regressors is generally unnecessary.</p>
<!--
Jim, this is very opinionated, does it make sense?

 -->
<!--
Andrea, do you know of an Azerbaijani example that we could use as a case study?
 -->
</section></section><section id="case-study-azerbaijani-consumer-price-index-for-construction" class="level2" data-number="9.4"><h2 data-number="9.4" class="anchored" data-anchor-id="case-study-azerbaijani-consumer-price-index-for-construction">
<span class="header-section-number">9.4</span> Case Study: Azerbaijani Consumer price index for construction</h2>
<p><code>td1coef</code> is significant. But does the series have a seasonal pattern?</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">cbar.sa</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'cbar.sa'</span></span>
<span><span class="co">#&gt; The following object is masked _by_ '.GlobalEnv':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     m1</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:seasonal':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     cpi</span></span>
<span><span class="va">m0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">cpi_const</span>,</span>
<span>  regression.variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"const"</span>, <span class="st">"ls2009.1"</span><span class="op">)</span>,</span>
<span>  arima.model <span class="op">=</span> <span class="st">"(1 1 0)"</span>,</span>
<span>  regression.aictest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outlier <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  transform.function <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Model used in SEATS is different: (0 1 1)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m0</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; seas(x = cpi_const, transform.function = "none", regression.aictest = NULL, </span></span>
<span><span class="co">#&gt;     outlier = NULL, regression.variables = c("const", "ls2009.1"), </span></span>
<span><span class="co">#&gt;     arima.model = "(1 1 0)")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                   Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Constant            0.7068     0.1674   4.224 2.40e-05 ***</span></span>
<span><span class="co">#&gt; LS2009.1           -3.5364     0.8613  -4.106 4.02e-05 ***</span></span>
<span><span class="co">#&gt; AR-Nonseasonal-01   0.3144     0.1229   2.558   0.0105 *  </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SEATS adj.  ARIMA: (1 1 0)  Obs.: 62  Transform: none</span></span>
<span><span class="co">#&gt; AICc:   169, BIC: 176.8  QS (no seasonality in final):0.7392  </span></span>
<span><span class="co">#&gt; Box-Ljung (no autocorr.): 11.86   Shapiro (normality): 0.9754  </span></span>
<span><span class="co">#&gt; Messages generated by X-13:</span></span>
<span><span class="co">#&gt; Notes:</span></span>
<span><span class="co">#&gt; - Model used for SEATS decomposition is different from the</span></span>
<span><span class="co">#&gt;   model estimated in the regARIMA modeling module of</span></span>
<span><span class="co">#&gt;   X-13ARIMA-SEATS.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">cpi_const</span>,</span>
<span>  regression.variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"const"</span>, <span class="st">"td1coef"</span>, <span class="st">"ls2009.1"</span><span class="op">)</span>, </span>
<span>  arima.model <span class="op">=</span> <span class="st">"(1 1 0)"</span>,</span>
<span>  regression.aictest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outlier <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  transform.function <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Model used in SEATS is different: (0 1 1)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; seas(x = cpi_const, transform.function = "none", regression.aictest = NULL, </span></span>
<span><span class="co">#&gt;     outlier = NULL, regression.variables = c("const", "td1coef", </span></span>
<span><span class="co">#&gt;         "ls2009.1"), arima.model = "(1 1 0)")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                   Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Constant            0.7050     0.1736   4.062 4.86e-05 ***</span></span>
<span><span class="co">#&gt; Weekday             0.1262     0.0436   2.896  0.00379 ** </span></span>
<span><span class="co">#&gt; Leap Year          -0.5241     0.2943  -1.781  0.07491 .  </span></span>
<span><span class="co">#&gt; LS2009.1           -3.3119     0.7863  -4.212 2.53e-05 ***</span></span>
<span><span class="co">#&gt; AR-Nonseasonal-01   0.3927     0.1210   3.245  0.00117 ** </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; SEATS adj.  ARIMA: (1 1 0)  Obs.: 62  Transform: none</span></span>
<span><span class="co">#&gt; AICc:   164, BIC: 175.1  QS (no seasonality in final):0.423  </span></span>
<span><span class="co">#&gt; Box-Ljung (no autocorr.): 12.95   Shapiro (normality): 0.9701  </span></span>
<span><span class="co">#&gt; Messages generated by X-13:</span></span>
<span><span class="co">#&gt; Notes:</span></span>
<span><span class="co">#&gt; - Model used for SEATS decomposition is different from the</span></span>
<span><span class="co">#&gt;   model estimated in the regARIMA modeling module of</span></span>
<span><span class="co">#&gt;   X-13ARIMA-SEATS.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="exercises" class="level2" data-number="9.5"><h2 data-number="9.5" class="anchored" data-anchor-id="exercises">
<span class="header-section-number">9.5</span> Exercises</h2>
<ol type="1">
<li>What is the difference between <code>td1coef</code> and <code>td</code> regressor? When would fit better than the other?</li>
<li>Run <code><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas()</a></code> to on AirPassengers using <code>td1coef</code> and <code>td</code> regressors and compare the results.</li>
<li>Consult X-13ARIMA-SEATS Reference Manual. What other options are available as built-in regressors to model trading days?</li>
<li>Would it make sense to model both the holiday and trading days effect at the same time?</li>
<li>Explain the difference among the following arguments: <code>xreg</code>, <code>regression.variables</code>, and <code>regression.usertype</code>. Are these equivalent?</li>
<li>Use the <code>trade_tur</code> series. Try modeling the holiday and trading days effect simultaneously and compare the results with the individual solutions. Do you get better results?</li>
</ol>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./31-holidays.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Irregular holidays</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./33-outliers.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Outliers</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">by James Livsey and Christoph Sax</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Seasonal Adjustment in R</div>
  </div>
</footer>


</body></html>